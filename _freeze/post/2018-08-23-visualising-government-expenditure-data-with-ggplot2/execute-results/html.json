{
  "hash": "53182ee582459f383206c5fa2f8ba112",
  "result": {
    "markdown": "---\ntitle: Visualising government expenditure data with ggplot2\nauthor: Philip Khor\ndate: '2018-08-24'\nslug: visualising-government-expenditure-dat\nsummary: \"Visualising Malaysia's stagnating development expenditure\"\ncategories:\n  - R\ntags: [\"ggplot2\", \"malaysia\"]\n---\n\n\nI thought I'd practice my rusty R skills when I came across a post by Khairil Yusof on the Sinar Project Facebook group that Malaysian Administrative Modernisation and Management Planning Unit (MAMPU) has made data on development expenditure over time available on data.gov.my. I haven't paid close enough attention to government budgets to have much comments about the trends, but a comment can be found [here](https://penanginstitute.org/programmes/penang-institute-in-kuala-lumpur/1038-analysing-malaysias-development-expenditure-in-the-federal-budget-from-2004-to-2018/). Tl;dr, the authors note that Malaysia's stagnating development expenditure is concerning since Malaysia is a developing economy.\n\nMy thinking while constructing this plot was to contrast the growth in each category of expenditure against the overall growth in development expenditure over time. I'm thinking about also including the trend in each category of expenditure within each facet.\n\nData is obtained from [data.gov.my](http://www.data.gov.my/data/ms_MY/dataset/perbelanjaan-pembangunan-kerajaan-persekutuan/resource/7a5c73ab-7496-4aa6-a924-a1d0e1fff53d). A cleaned version of the data is available [here](https://www.dropbox.com/s/m546u01hsf8zvb2/malaysiaDevExp.csv?dl=1).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readr)\nlibrary(tidyverse)\nlibrary(here)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nmalaysiaDevExp <- read_csv(here(\"data\", \"malaysiaDevExp.csv\"))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 49 Columns: 19\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (19): Year, EconomyTotal, AgroRuralDev, PublicAmenities, TradeAndIndustr...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\n# create separate dataframe for background totals\nmalaysiaDevExp %>% \n  select(Year, Value = Total) %>% \n  mutate(Year = as.numeric(Year), \n         Value = Value/1000)-> DevExpTotal\n\nmalaysiaDevExp %>%\n  # select some columns; rename as needed\n  select(Year, \n         Economy = EconomyTotal, \n         Social = SocialTotal, \n         Safety = SafetyTotal, \n         `Public Administration` = PublicAdmin) %>%\n  # Year was imported as factor; change this to numeric\n  mutate(Year = as.numeric(Year)) %>% \n  gather(ExpCat, Value, -Year) %>% \n  ggplot(aes(x = Year, y = Value/1000)) + \n  # totals in background\n  geom_ribbon(data = DevExpTotal, \n              aes(ymin=0, ymax = Value), \n              fill = 'gray96', \n              group = 1) + \n  # line representing each expenditure category, in different colors\n  geom_path(group=1, aes(color = ExpCat)) + \n  # separate each expenditure category into facets\n  facet_wrap(~ExpCat) + \n  # no legends\n  guides(color = FALSE) + \n  # set break points in x-axis \n  scale_x_continuous(breaks = c(1975, 1985, 1995, 2005,2015)) +\n  # draw rectangle to highlight that numbers should be treated with caution\n  geom_rect(inherit.aes=FALSE, \n            aes(xmin=2017, xmax=2018, ymin=0, ymax=60), \n            color=\"transparent\", \n            fill=\"lightcoral\", \n            alpha = 0.01) +\n  theme_minimal() + \n  theme(panel.grid.major = element_blank(), # remove grid lines\n        panel.grid.minor = element_blank(), \n        # bold facet titles\n        strip.text = element_text(face = 'bold', color = 'gray29'), \n        # format text on ticks\n        axis.text = element_text(size = 9, color = 'gray45'), \n        # format axis labels\n        axis.title = element_text(color = 'gray35'),\n        # format caption text\n        plot.caption = element_text(color = 'gray30')) + \n  labs(title = \"Malaysia's spending on safety and public admin hasn't grown much\", \n       subtitle = \"Strongest growth in development expenditure is in economic and social spending\", \n       y = \"RM ('000) million\", \n       caption = \"Source: data.gov.my \\n2017 data is preliminary data; 2018 data are Budget estimates\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: The `<scale>` argument of `guides()` cannot be `FALSE`. Use \"none\" instead as\nof ggplot2 3.3.4.\n```\n:::\n\n::: {.cell-output-display}\n![](2018-08-23-visualising-government-expenditure-data-with-ggplot2_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "2018-08-23-visualising-government-expenditure-data-with-ggplot2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}